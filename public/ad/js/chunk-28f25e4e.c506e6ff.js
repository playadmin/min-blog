(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28f25e4e"],{"2dea":function(e,t,c){"use strict";var i=c("2638"),s=c.n(i),n=c("52da"),a=c.n(n),l=c("a3e3"),h=c.n(l),r=c("e946"),o=c.n(r),d=c("82ec"),u=c.n(d),k=c("9474"),f=c.n(k),v=c("fa81"),m=c.n(v),p=c("14b1"),g=c.n(p);t["a"]={name:"b-table",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},checked:{type:Array,default:function(){return[]}},dischecked:Function},data:function(){return{orgData:[],checkedAll:!1,thisChecked:this.checked,sort:{}}},methods:{checkAll:function(e){var t=this;if(e.target.checked)if(this.dischecked){var c,i=[];g()(c=this.value).call(c,(function(e,c){return t.dischecked(e)||i.push(c)})),this.thisChecked=i}else{var s;this.thisChecked=g()(s=m()(this.value)).call(s,(function(e){return f()(e)}))}else this.thisChecked=[];this.$emit("checked",this.thisChecked)},check:function(){var e=this;if(this.dischecked){var t,c=0;g()(t=this.value).call(t,(function(t){return e.dischecked(t)||++c})),this.checkedAll=this.thisChecked.length===c}else this.thisChecked.length===this.value.length?this.checkedAll=!0:this.checkedAll=!1;this.$emit("checked",this.thisChecked)},getChecked:function(e){for(var t=this,c=[],i=function(i,s){var n=t.value[t.thisChecked[i]];if(e)if(e.push){var a={};g()(e).call(e,(function(e){return a[e]=n[e]})),c.push(a)}else c.push(n[e]);else c.push(n)},s=0,n=this.thisChecked.length;s!==n;++s)i(s,n);return c},sortData:function(e){var t,c,i,s;("function"===typeof u()(e)?t=u()(e):"string"===u()(e)||isNaN(f()(this.value[0][e.key]))?(t=function(t,c){return String(t[e.key]).localeCompare(String(c[e.key]))},c=function(t,c){return String(c[e.key]).localeCompare(String(t[e.key]))}):(t=function(t,c){return t[e.key]-c[e.key]},c=function(t,c){return c[e.key]-t[e.key]}),u()(this).k===e.key&&1===u()(this).v)?(u()(this).v=0,u()(i=this.value).call(i,c)):(this.sort={k:e.key,v:1},u()(s=this.value).call(s,t));this.thisChecked.length&&(this.thisChecked=[])&&this.$emit("checked",this.thisChecked)}},render:function(){var e,t,c,i=this,n=arguments[0],l=[],r={},d=[];return g()(e=this.columns).call(e,(function(e,t){var c,k=e.key||t;r[k]=e,d.push(k),c="checkbox"===e.type?n("th",[n("input",s()([{on:{change:[function(e){var t=i.checkedAll,c=e.target,s=!!c.checked;if(o()(t)){var n,l=null,r=i._i(t,l);if(c.checked)r<0&&(i.checkedAll=h()(t).call(t,[l]));else r>-1&&(i.checkedAll=h()(n=a()(t).call(t,0,r)).call(n,a()(t).call(t,r+1)))}else i.checkedAll=s},i.checkAll]},attrs:{type:"checkbox"},domProps:{checked:o()(i.checkedAll)?i._i(i.checkedAll,null)>-1:i.checkedAll}},{directives:[{name:"model",value:i.checkedAll,modifiers:{}}]}]))]):u()(e)&&i.value[0]?n("th",{style:"cursor:pointer",on:{click:function(){return i.sortData(e)}}},[e.title,n("i",{class:"mb",directives:[{name:"show",value:e.key===u()(i).k&&u()(i).v}]},[" ▲"]),n("i",{class:"mb",directives:[{name:"show",value:e.key===u()(i).k&&!u()(i).v}]},[" ▼"]),n("i",{class:"mb",directives:[{name:"show",value:e.key!==u()(i).k}]},[" –"])]):n("th",[e.title]),l.push(c)})),n("table",[n("thead",[n("tr",h()(t=[]).call(t,l))]),n("tbody",[this.value.length?g()(c=m()(this.value)).call(c,(function(e){var t;e=f()(e);var c=i.value[e],l=h()(t=[]).call(t,d);return n("tr",[g()(l).call(l,(function(t){var l=r[t];if(l.type)return n("td",[n("input",s()([{on:{change:[function(t){var c=i.thisChecked,s=t.target,n=!!s.checked;if(o()(c)){var l,r=e,d=i._i(c,r);if(s.checked)d<0&&(i.thisChecked=h()(c).call(c,[r]));else d>-1&&(i.thisChecked=h()(l=a()(c).call(c,0,d)).call(l,a()(c).call(c,d+1)))}else i.thisChecked=n},i.check]},attrs:{disabled:i.dischecked&&i.dischecked(c,e),type:"checkbox"},domProps:{checked:o()(i.thisChecked)?i._i(i.thisChecked,e)>-1:i.thisChecked}},{directives:[{name:"model",value:i.thisChecked,modifiers:{}}]}]))]);var d={style:l.style,class:l.class};if(l.on){d.on={};var u=function(t){d.on[t]=function(){l.on[t](i.value[e],t,e)}};for(var k in l.on)u(k)}var f=l?l.slot?i.$scopedSlots[l.slot](c,e):l.calc?l.calc(c,t,e):i.value[e][t]:"";return n("td",s()([{},d]),[f])}))])})):n("tr",[n("td",{style:{textAlign:"center",fontSize:"1.2em",padding:"1em"},attrs:{colspan:d.length}},["没有数据"])])])])}}},6356:function(e,t,c){"use strict";c.r(t);var i=function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{staticClass:"main"},[c("tag-form",{ref:"form",on:{ok:e.newSet}}),c("div",{staticClass:"content"},[c("h2",{staticClass:"center"},[e._v("标签管理")]),c("button",{staticClass:"ghost",on:{click:e.add}},[e._v("新建标签")]),c("button",{directives:[{name:"show",rawName:"v-show",value:e.checked.length,expression:"checked.length"}],staticClass:"ghost pink",on:{click:function(t){return e.confirm(0)}}},[e._v("批量删除")]),c("div",{staticStyle:{overflow:"auto"}},[c("b-table",{ref:"table",staticStyle:{"min-width":"15rem"},attrs:{columns:e.columns},on:{checked:e.checkbox},scopedSlots:e._u([{key:"show",fn:function(t){return c("div",{},[t.show?c("span",{staticClass:"c-pink"},[e._v("仅自己可见")]):c("span",[e._v("全部可见")])])}},{key:"act",fn:function(t,i){return c("div",{staticClass:"group"},[c("button",{staticClass:"ghost pink",on:{click:function(c){return e.confirm(t,i)}}},[e._v("删除")]),c("button",{staticClass:"ghost",on:{click:function(c){return e.set(t,i)}}},[e._v("编辑")])])}}]),model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})],1)])],1)},s=[],n=(c("a15b"),c("9a73")),a=c.n(n),l=c("e4f0"),h=c.n(l),r=c("3393"),o=c.n(r),d=c("e76e"),u=c.n(d),k=c("3835"),f=c("d65a"),v=c("2dea"),m=c("5f3f"),p={components:{"b-table":v["a"],"tag-form":m["a"]},data:function(){return{data:[],checked:[],columns:[{type:"checkbox"},{key:"tid",title:"ID",sort:!0},{key:"tag",title:"名称",sort:!0},{key:"mark",title:"备注",sort:"string"},{key:"show",title:"可见",slot:"show",sort:"string"},{key:"sort",title:"排序",sort:!0},{title:"操作",slot:"act"}]}},created:function(){this.get()},methods:{checkbox:function(e){this.checked=e},get:function(){var e=this;Object(f["g"])().then((function(t){e.data=t.data}))},newSet:function(e){var t=Object(k["a"])(e,2),c=t[0],i=t[1];-1===i?this.data.unshift(c):this.$set(this.data,i,u()(this.data[i],c))},confirm:function(e,t){var c=this;if(e)this.$Confirm({title:"确认删除标签？",msg:e.tag,ok:function(){return c.del(e,t)}});else if(this.checked.length){var i=this.$refs.table.getChecked("tag");this.$Confirm({title:"删除以下标签？",class:"pink",msg:i.join("\n"),ok:this.del})}else this.$Alert("请选择要删除的项目")},del:function(e,t){var c=this,i=e?e.tid:this.$refs.table.getChecked("tid");Object(f["c"])(i).then((function(i){if(200===i.status){var s,n;if(e)o()(s=c.data).call(s,t,1);else c.data=h()(n=c.data).call(n,(function(e,t){var i;return!a()(i=c.checked).call(i,t)}));c.$store.commit("APP_SET_TAGS",c.data)}}))},set:function(e,t){this.$refs.form.set(e,t)},add:function(){this.$refs.form.add()}}},g=p,y=c("2877"),C=Object(y["a"])(g,i,s,!1,null,null,null);t["default"]=C.exports}}]);