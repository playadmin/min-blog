(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b3109490"],{"03ea":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("nav-form",{ref:"form",on:{ok:t.newSet}}),s("div",{staticClass:"content"},[s("h2",{staticClass:"center"},[t._v("导航页面管理")]),s("button",{staticClass:"ghost",on:{click:t.add}},[t._v("新建导航页")]),s("div",{staticStyle:{overflow:"auto"}},[s("b-table",{ref:"table",staticStyle:{"min-width":"15rem"},attrs:{columns:t.columns},scopedSlots:t._u([{key:"show",fn:function(e){return s("div",{},[e.show?s("span",{staticClass:"c-pink"},[t._v("可见")]):s("span",[t._v("隐藏")])])}},{key:"act",fn:function(e,i){return s("div",{staticClass:"group"},[s("button",{staticClass:"ghost pink",on:{click:function(s){return t.confirm(e,i)}}},[t._v("删除")]),s("button",{staticClass:"ghost",on:{click:function(s){return t.set(e,i)}}},[t._v("设置")]),e.tid?t._e():s("router-link",{staticClass:"btn ghost",attrs:{to:{name:"Page",params:{name:e.name}}}},[t._v("编辑页面")])],1)}}]),model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1)])],1)},a=[],n=(s("b0c0"),s("3393")),l=s.n(n),c=s("82ec"),o=s.n(c),r=s("e76e"),d=s.n(r),h=s("3835"),u=s("d65a"),f=s("2dea"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{attrs:{title:t.title,close:!1,boxProps:{style:"width:10rem"}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{ref:"form",staticClass:"form"},[s("div",{staticClass:"field inline"},[s("label",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.istag,expression:"istag"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.istag)?t._i(t.istag,null)>-1:t.istag},on:{change:function(e){var s=t.istag,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,l=t._i(s,n);i.checked?l<0&&(t.istag=s.concat([n])):l>-1&&(t.istag=s.slice(0,l).concat(s.slice(l+1)))}else t.istag=a}}}),t._v(" 标签导航 ")])]),t.istag?s("div",{staticClass:"field inline"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.fields.tid,expression:"fields.tid"}],attrs:{name:"tid"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.fields,"tid",e.target.multiple?s:s[0])}}},[s("option",{staticStyle:{display:"none"},attrs:{disabled:""},domProps:{value:0}},[t._v("选择标签")]),t._l(t.$store.state.app.tags,(function(e){return s("option",{key:e.tid,domProps:{value:e.tid}},[t._v(" "+t._s(e.tag)+" ")])}))],2),s("p",{staticClass:"msg"})]):t._e(),s("div",{staticClass:"field"},[s("div",{staticClass:"input-group"},[s("span",[t._v("唯一标识")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.name,expression:"fields.name"}],attrs:{disabled:-1!==t.index,name:"name",type:"text",placeholder:"例如：about"},domProps:{value:t.fields.name},on:{input:function(e){e.target.composing||t.$set(t.fields,"name",e.target.value)}}})]),s("p",{staticClass:"msg"})]),s("div",{staticClass:"field"},[s("div",{staticClass:"input-group"},[s("span",[t._v("链接名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.title,expression:"fields.title"}],attrs:{name:"title",type:"text",placeholder:"显示的链接名，例如：关于我们"},domProps:{value:t.fields.title},on:{input:function(e){e.target.composing||t.$set(t.fields,"title",e.target.value)}}})]),s("p",{staticClass:"msg"})]),s("div",{staticClass:"field"},[s("div",{staticClass:"input-group"},[s("span",[t._v("排序")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.sort,expression:"fields.sort"}],attrs:{name:"sort",type:"number"},domProps:{value:t.fields.sort},on:{input:function(e){e.target.composing||t.$set(t.fields,"sort",e.target.value)}}})]),s("p",{staticClass:"msg"})]),s("div",{staticClass:"field inline"},[s("label",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.show,expression:"fields.show"}],attrs:{name:"show",type:"checkbox"},domProps:{checked:Array.isArray(t.fields.show)?t._i(t.fields.show,null)>-1:t.fields.show},on:{change:function(e){var s=t.fields.show,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,l=t._i(s,n);i.checked?l<0&&t.$set(t.fields,"show",s.concat([n])):l>-1&&t.$set(t.fields,"show",s.slice(0,l).concat(s.slice(l+1)))}else t.$set(t.fields,"show",a)}}}),t._v(" 在导航栏显示 ")]),s("p",{staticClass:"msg"})]),s("div",{staticClass:"field"},[s("button",{staticClass:"ghost w100",on:{click:t.submit}},[t._v("提 交")])])])])},m=[],k=s("5530"),p=s("01ac"),g=s("fa1f"),y={components:{"b-modal":g["c"]},data:function(){return{index:-1,istag:!1,valid:{},title:"",show:!1,fields:{},validRules:{name:[{type:"len",rule:[2,32],msg:"2-32个字符"}],title:[{type:"len",rule:[2,32],msg:"2-32个字符"}],tid:[{rule:function(t){return t&&"0"!==t},msg:"请选择标签"}]}}},computed:{tags:function(){return this.$store.state.app.tags}},mounted:function(){this.valid=new p["a"](this.validRules,this.$refs.form)},methods:{set:function(t,e){if(t){this.index=e,this.title="设置页面【".concat(t.title,"】");var s=this.$store.getters.tagsMap[t.tid]?t.tid:0;this.fields=Object(k["a"])(Object(k["a"])({},t),{},{tid:s,show:!!t.show}),this.istag=!!t.tid}else this.index=-1,this.title="新建页面",this.fields={show:!0,tid:this.tags[0]?this.tags[0].tid:0};this.show=!0},submit:function(){var t=this;if(this.valid.all()){var e=Object(k["a"])({},this.fields);-1===this.index&&(e.add=1),Object(u["i"])(e).then((function(e){200===e.status&&(t.show=!1,t.$emit("ok",[e.data,t.index]))}))}}}},C=y,b=s("2877"),w=Object(b["a"])(C,v,m,!1,null,null,null),_=w.exports,A={components:{"b-table":f["a"],"nav-form":_},data:function(){return{data:[],columns:[{key:"name",title:"文件名"},{key:"title",title:"链接名"},{key:"show",title:"显示",slot:"show"},{key:"sort",title:"排序",sort:!0},{title:"操作",slot:"act"}]}},created:function(){this.get()},methods:{get:function(){var t=this;Object(u["d"])().then((function(e){t.data=e.data}))},newSet:function(t){var e,s=Object(h["a"])(t,2),i=s[0],a=s[1];-1===a?this.data.unshift(i):d()(this.data[a],i),o()(e=this.data).call(e,(function(t,e){return o()(t)-o()(e)}))},confirm:function(t,e){var s=this;t&&this.$Confirm({class:"blue",title:"确认删除页面？",msg:t.title,ok:function(){return s.del(t,e)}})},del:function(t,e){var s=this;Object(u["b"])({name:t.name}).then((function(t){var i;200===t.status&&l()(i=s.data).call(i,e,1)}))},set:function(t,e){this.$refs.form.set(t,e)},add:function(){this.$refs.form.set()}}},x=A,$=Object(b["a"])(x,i,a,!1,null,null,null);e["default"]=$.exports},"2dea":function(t,e,s){"use strict";var i=s("2638"),a=s.n(i),n=s("52da"),l=s.n(n),c=s("a3e3"),o=s.n(c),r=s("e946"),d=s.n(r),h=s("82ec"),u=s.n(h),f=s("9474"),v=s.n(f),m=s("fa81"),k=s.n(m),p=s("14b1"),g=s.n(p);e["a"]={name:"b-table",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},checked:{type:Array,default:function(){return[]}},dischecked:Function},data:function(){return{orgData:[],checkedAll:!1,thisChecked:this.checked,sort:{}}},methods:{checkAll:function(t){var e=this;if(t.target.checked)if(this.dischecked){var s,i=[];g()(s=this.value).call(s,(function(t,s){return e.dischecked(t)||i.push(s)})),this.thisChecked=i}else{var a;this.thisChecked=g()(a=k()(this.value)).call(a,(function(t){return v()(t)}))}else this.thisChecked=[];this.$emit("checked",this.thisChecked)},check:function(){var t=this;if(this.dischecked){var e,s=0;g()(e=this.value).call(e,(function(e){return t.dischecked(e)||++s})),this.checkedAll=this.thisChecked.length===s}else this.thisChecked.length===this.value.length?this.checkedAll=!0:this.checkedAll=!1;this.$emit("checked",this.thisChecked)},getChecked:function(t){for(var e=this,s=[],i=function(i,a){var n=e.value[e.thisChecked[i]];if(t)if(t.push){var l={};g()(t).call(t,(function(t){return l[t]=n[t]})),s.push(l)}else s.push(n[t]);else s.push(n)},a=0,n=this.thisChecked.length;a!==n;++a)i(a,n);return s},sortData:function(t){var e,s,i,a;("function"===typeof u()(t)?e=u()(t):"string"===u()(t)||isNaN(v()(this.value[0][t.key]))?(e=function(e,s){return String(e[t.key]).localeCompare(String(s[t.key]))},s=function(e,s){return String(s[t.key]).localeCompare(String(e[t.key]))}):(e=function(e,s){return e[t.key]-s[t.key]},s=function(e,s){return s[t.key]-e[t.key]}),u()(this).k===t.key&&1===u()(this).v)?(u()(this).v=0,u()(i=this.value).call(i,s)):(this.sort={k:t.key,v:1},u()(a=this.value).call(a,e));this.thisChecked.length&&(this.thisChecked=[])&&this.$emit("checked",this.thisChecked)}},render:function(){var t,e,s,i=this,n=arguments[0],c=[],r={},h=[];return g()(t=this.columns).call(t,(function(t,e){var s,f=t.key||e;r[f]=t,h.push(f),s="checkbox"===t.type?n("th",[n("input",a()([{on:{change:[function(t){var e=i.checkedAll,s=t.target,a=!!s.checked;if(d()(e)){var n,c=null,r=i._i(e,c);if(s.checked)r<0&&(i.checkedAll=o()(e).call(e,[c]));else r>-1&&(i.checkedAll=o()(n=l()(e).call(e,0,r)).call(n,l()(e).call(e,r+1)))}else i.checkedAll=a},i.checkAll]},attrs:{type:"checkbox"},domProps:{checked:d()(i.checkedAll)?i._i(i.checkedAll,null)>-1:i.checkedAll}},{directives:[{name:"model",value:i.checkedAll,modifiers:{}}]}]))]):u()(t)&&i.value[0]?n("th",{style:"cursor:pointer",on:{click:function(){return i.sortData(t)}}},[t.title,n("i",{class:"mb",directives:[{name:"show",value:t.key===u()(i).k&&u()(i).v}]},[" ▲"]),n("i",{class:"mb",directives:[{name:"show",value:t.key===u()(i).k&&!u()(i).v}]},[" ▼"]),n("i",{class:"mb",directives:[{name:"show",value:t.key!==u()(i).k}]},[" –"])]):n("th",[t.title]),c.push(s)})),n("table",[n("thead",[n("tr",o()(e=[]).call(e,c))]),n("tbody",[this.value.length?g()(s=k()(this.value)).call(s,(function(t){var e;t=v()(t);var s=i.value[t],c=o()(e=[]).call(e,h);return n("tr",[g()(c).call(c,(function(e){var c=r[e];if(c.type)return n("td",[n("input",a()([{on:{change:[function(e){var s=i.thisChecked,a=e.target,n=!!a.checked;if(d()(s)){var c,r=t,h=i._i(s,r);if(a.checked)h<0&&(i.thisChecked=o()(s).call(s,[r]));else h>-1&&(i.thisChecked=o()(c=l()(s).call(s,0,h)).call(c,l()(s).call(s,h+1)))}else i.thisChecked=n},i.check]},attrs:{disabled:i.dischecked&&i.dischecked(s,t),type:"checkbox"},domProps:{checked:d()(i.thisChecked)?i._i(i.thisChecked,t)>-1:i.thisChecked}},{directives:[{name:"model",value:i.thisChecked,modifiers:{}}]}]))]);var h={style:c.style,class:c.class};if(c.on){h.on={};var u=function(e){h.on[e]=function(){c.on[e](i.value[t],e,t)}};for(var f in c.on)u(f)}var v=c?c.slot?i.$scopedSlots[c.slot](s,t):c.calc?c.calc(s,e,t):i.value[t][e]:"";return n("td",a()([{},h]),[v])}))])})):n("tr",[n("td",{style:{textAlign:"center",fontSize:"1.2em",padding:"1em"},attrs:{colspan:h.length}},["没有数据"])])])])}}}}]);